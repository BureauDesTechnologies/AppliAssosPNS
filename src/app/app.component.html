<ion-app>
    <div class="mainWrapper">
        <header>
            <nav class="navbar navbar-expand navbar-dark bg-dark desktop">
                <a class="navbar-brand" routerLink="/">Assos PNS</a>
                <button aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"
                        class="navbar-toggler"
                        data-target="#navbarNav" data-toggle="collapse" type="button">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <!-- menu when not connected -->
                    <ul *ngIf="!isLogged" class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" routerLink="/">Accueil</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" routerLink="/aboutAll">Nous découvrir<span
                                    class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" routerLink="/login">Se connecter<span
                                    class="sr-only">(current)</span></a>
                        </li>
                    </ul>
                    <!-- menu when connected -->
                    <ul *ngIf="isLogged" class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" routerLink="/">Accueil</a>
                        </li>
                        <li class="nav-item tooSmallHeight">
                            <a (click)="displayAssosPages = true" class="nav-link">Les assos<span
                                    class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" routerLink="/aboutAll">Nous découvrir<span
                                    class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" routerLink="/subscriptions">Abonnements</a>
                        </li>
                        <li *ngIf="isLogged && connectedUser.canPublishAs.length > 0"
                            class="nav-item">
                            <a class="nav-link" routerLink="/publish">Publier</a>
                        </li>
                        <li *ngIf="isLogged && connectedUser.canPublishAs.length > 0"
                            class="nav-item">
                            <a class="nav-link" routerLink="/giveRights">Déléguer</a>
                        </li>
                        <li class="nav-item">
                            <a (click)="disconnect()" class="nav-link" style="cursor: pointer">Se déconnecter</a>
                        </li>
                    </ul>
                </div>
            </nav>
            <!-- Menu for mobile -->
            <nav (mouseleave)="mobileMenuOpened = false"
                 class="navbar navbar-expand navbar-dark bg-dark mobile tooSmallHeight">
                <!-- mobile menu -->
                <div class="headerMobile tooSmallHeightHide">
                    <a class="navbar-brand" routerLink="/">Assos PNS</a>
                    <div (click)="mobileMenuOpened = !mobileMenuOpened">
                        <mat-icon>menu</mat-icon>
                    </div>
                    <!-- mobile menu with links -->
                    <div (click)="mobileMenuOpened = false" *ngIf="mobileMenuOpened" class="mobileMenu">
                        <ul *ngIf="!isLogged || connectedUser === null" class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" routerLink="/">Accueil</a>
                            </li>
                            <li (click)="mobileMenuOpened = false" class="nav-item">
                                <a class="nav-link" routerLink="/aboutAll">Nous découvrir</a>
                            </li>
                            <li class="nav-item">
                                <a (click)="displayAssosPages = true" class="nav-link">Les assos</a>
                            </li>
                            <li (click)="mobileMenuOpened = false" class="nav-item">
                                <a class="nav-link" routerLink="/login">Se connecter</a>
                            </li>
                        </ul>
                        <ul (click)="mobileMenuOpened = false" *ngIf="isLogged"
                            class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" routerLink="/">Accueil</a>
                            </li>
                            <li class="nav-item">
                                <a (click)="displayAssosPages = true" class="nav-link">Les assos</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" routerLink="/aboutAll">Nous découvrir<span
                                        class="sr-only">(current)</span></a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" routerLink="/subscriptions">Abonnements</a>
                            </li>
                            <!--<li class="nav-item">-->
                            <!--<a class="nav-link" routerLink="/profile">Mon profil</a>-->
                            <!--</li>-->
                            <li *ngIf="isLogged && connectedUser.canPublishAs.length > 0"
                                class="nav-item">
                                <a class="nav-link" routerLink="/publish">Publier</a>
                            </li>
                            <li *ngIf="isLogged && connectedUser.canPublishAs.length > 0"
                                class="nav-item">
                                <a class="nav-link" routerLink="/giveRights">Déléguer</a>
                            </li>
                            <li class="nav-item">
                                <a (click)="disconnect()" class="nav-link" style="cursor: pointer">Se déconnecter</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- Assos choice when sidenav is hidden -->
                <div *ngIf="displayAssosPages" class="assoChoiceMobileWrapper ">
                    <div class="assoChoiceMobile">
                        <mat-icon (click)="displayAssosPages = false; mobileMenuOpened = false;">close</mat-icon>
                        <a (click)="displayAssosPages = false; mobileMenuOpened = false;" routerLink="/bde">
                            <div class="menuItem">
                                <div class="bde logo active"></div>
                                <div class="assoName"><p>Bureau des Élèves</p></div>
                            </div>
                        </a>
                        <a (click)="displayAssosPages = false; mobileMenuOpened = false;" routerLink="/bds">
                            <div class="menuItem">
                                <div class="bds logo active"></div>
                                <div class="assoName"><p>Bureau du Sport</p></div>
                            </div>
                        </a>
                        <a (click)="displayAssosPages = false; mobileMenuOpened = false;" routerLink="/bdc">
                            <div class="menuItem">
                                <div class="bdc logo active"></div>
                                <div class="assoName"><p>Bureau du Code</p></div>
                            </div>
                        </a>
                        <a (click)="displayAssosPages = false; mobileMenuOpened = false;" routerLink="/bdj">
                            <div class="menuItem">
                                <div class="bdj logo active"></div>
                                <div class="assoName"><p>Bureau des Jeux</p></div>
                            </div>
                        </a>
                        <a (click)="displayAssosPages = false; mobileMenuOpened = false;" routerLink="/bda">
                            <div class="menuItem">
                                <div class="bda logo active"></div>
                                <div class="assoName"><p>Bureau des Arts</p></div>
                            </div>
                        </a>
                        <a (click)="displayAssosPages = false; mobileMenuOpened = false;" routerLink="/pnc">
                            <div class="menuItem">
                                <div class="pnc logo active"></div>
                                <div class="assoName"><p>Polytech Nice Conseil</p></div>
                            </div>
                        </a>
                        <a (click)="displayAssosPages = false; mobileMenuOpened = false;" routerLink="/bdh">
                            <div class="menuItem">
                                <div class="bdh logo active"></div>
                                <div class="assoName"><p>Humanitaire et Environnement</p></div>
                            </div>
                        </a>
                    </div>
                </div>
            </nav>
        </header>
        <mat-sidenav-container>
            <mat-sidenav mode="side" opened>
                <div class="logos">
                    <a routerLink="/bde">
                        <div class="menuItem">
                            <div [class]="currentRoute.startsWith('/bde') ? 'bde logo active': 'bde logo'"></div>
                            <div class="assoName"><p>Bureau des Élèves</p></div>
                        </div>
                    </a>
                    <a routerLink="/bds">
                        <div class="menuItem">
                            <div [class]="currentRoute.startsWith('/bds') ? 'bds logo active': 'bds logo'"></div>
                            <div class="assoName"><p>Bureau du Sport</p></div>
                        </div>
                    </a>
                    <a routerLink="/bdc">
                        <div class="menuItem">
                            <div [class]="currentRoute.startsWith('/bdc') ? 'bdc logo active': 'bdc logo'"></div>
                            <div class="assoName"><p>Bureau du Code</p></div>
                        </div>
                    </a>
                    <a routerLink="/bdj">
                        <div class="menuItem">
                            <div [class]="currentRoute.startsWith('/bdj') ? 'bdj logo active': 'bdj logo'"></div>
                            <div class="assoName"><p>Bureau des Jeux</p></div>
                        </div>
                    </a>
                    <a routerLink="/bda">
                        <div class="menuItem">
                            <div [class]="currentRoute.startsWith('/bda') ? 'bda logo active': 'bda logo'"></div>
                            <div class="assoName"><p>Bureau des Arts</p></div>
                        </div>
                    </a>
                    <a routerLink="/pnc">
                        <div class="menuItem">
                            <div [class]="currentRoute.startsWith('/pnc') ? 'pnc logo active': 'pnc logo'"></div>
                            <div class="assoName"><p>Polytech Nice Conseil</p></div>
                        </div>
                    </a>
                    <a routerLink="/bdh">
                        <div class="menuItem">
                            <div [class]="currentRoute.startsWith('/bdh') ? 'bdh logo active': 'bdh logo'"></div>
                            <div class="assoName"><p>Humanitaire et Environnement</p></div>
                        </div>
                    </a>
                </div>
            </mat-sidenav>
            <mat-sidenav-content>
                <router-outlet></router-outlet>
            </mat-sidenav-content>
        </mat-sidenav-container>
        <!--<footer>-->
        <!--<p>Un site du Bureau du code pour les associations de Polytech Nice Sophia - <a routerLink="/cgu">Conditions-->
        <!--d'utilisations</a></p>-->
        <!--</footer>-->
    </div>
</ion-app>
